$(document).ready(function() {
    // Initialize FitVids for responsive videos
    $("#main").fitVids();

    // Initialize Stickyfill for sticky elements
    $(".sticky").Stickyfill();

    // Function to handle author URLs visibility
    var e = function() {
        var e = 0 === $(".author__urls-wrapper button").length ? $(window).width() > 1024 : !$(".author__urls-wrapper button").is(":visible");
        e ? (Stickyfill.rebuild(), Stickyfill.init(), $(".author__urls").show()) : (Stickyfill.stop(), $(".author__urls").hide());
    };
    e();

    // Handle window resize
    $(window).resize(function() {
        e();
    });

    // Toggle author URLs on button click
    $(".author__urls-wrapper button").on("click", function() {
        $(".author__urls").fadeToggle("fast", function() {});
        $(".author__urls-wrapper button").toggleClass("open");
    });

    // Smooth scroll for anchor links
    $("a").smoothScroll({ offset: -20 });

    // Initialize Magnific Popup for images
    $("a[href$='.jpg'],a[href$='.jpeg'],a[href$='.JPG'],a[href$='.png'],a[href$='.gif']").addClass("image-popup");
    $(".image-popup").magnificPopup({
        type: "image",
        tLoading: "Loading image #%curr%...",
        gallery: {
            enabled: true,
            navigateByImgClick: true,
            preload: [0, 1]
        },
        image: {
            tError: '<a href="%url%">Image #%curr%</a> could not be loaded.'
        },
        removalDelay: 500,
        mainClass: "mfp-zoom-in",
        callbacks: {
            beforeOpen: function() {
                this.st.image.markup = this.st.image.markup.replace("mfp-figure", "mfp-figure mfp-with-anim");
            }
        },
        closeOnContentClick: true,
        midClick: true
    });
});
